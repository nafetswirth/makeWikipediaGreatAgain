!function(){"use strict";angular.module("wiki",["ngAnimate","ngCookies","ngResource","ngSanitize","ui.router","smart-table","ngTouch","btford.markdown"]).config(["$urlRouterProvider","$stateProvider",function(a,b){a.otherwise("/"),b.state("articles",{url:"/",templateUrl:"/views/articles.html",controller:"ArticlesCtrl as vm",resolve:{articles:["Resource",function(a){return a.articles.query().$promise}]}}).state("newArticle",{url:"/new",templateUrl:"/views/articleDetail.html",controller:"ArticleDetailCtrl as vm",resolve:{article:["$q",function(a){return a.when({})}]}}).state("articleDetail",{url:"/:articleId",templateUrl:"/views/articleDetail.html",controller:"ArticleDetailCtrl as vm",resolve:{article:["$stateParams","Resource",function(a,b){var c=a.articleId;return b.articles.get({articleId:c}).$promise}]}})}])}(),function(){"use strict";function a(a){var b="http://localhost:4567/";return{articles:a(b+"articles/:articleId",{articleId:"@articleId"},{})}}angular.module("wiki").factory("Resource",["$resource",a])}(),function(){"use strict";function a(a,b){function c(a){return confirm("Are you sure?")?void b.articles["delete"]({articleId:a.id}).$promise.then(function(a){var b=a.id;d.articles=d.articles.filter(function(a){return a.id!==b})}):!1}var d=this;console.log(a),d.articles=a,d.deleteArticle=c}angular.module("wiki").controller("ArticlesCtrl",["articles","Resource",a])}(),function(){"use strict";function a(a,b){function c(){b.articles.query().$promise.then(function(a){h.allArticles=a,console.log(h.allArticles)})["catch"](function(a){console.error(a)})}function d(a){var b="["+a.name+"](#/"+a.id+")";f(b)}function e(){return void 0===h.article.content||0===h.article.content.length}function f(a){e()||(a="\n"+a),h.article.content+=a}function g(a){b.articles.save({articleId:a.id,name:a.name,content:a.content},a).$promise.then(function(){h.isEdit=!h.isEdit})["catch"](function(a){console.error(a)})}var h=this;h.appendToContent=f,h.allArticles=[],h.article=a,h.generateWikiLinkFor=d,h.isEdit=0===Object.keys(a).length,h.noContent=e,h.saveArticle=g,c()}angular.module("wiki").controller("ArticleDetailCtrl",["article","Resource",a])}(),angular.module("wiki").run(["$templateCache",function(a){"use strict";a.put("views/articleDetail.html",'<div class="page-header"> <h1 ng-if="!vm.isEdit">{{vm.article.name}}</h1> <a href="#" ng-if="!vm.isEdit" ng-click="vm.isEdit = !vm.isEdit">edit</a> <input ng-if="vm.isEdit" ng-model="vm.article.name" type="text" class="form-control" placeholder="Name your article"> </div> <div class="jumbotron"> <div ng-show="vm.noContent()" class="page-header"> <h3><small>This article is currently empty. Write something!</small></h3> </div> <div btf-markdown="vm.article.content"></div> </div> <hr> <div ng-if="vm.isEdit"> <div class="btn-group" role="group" aria-label="something"> <button ng-click="vm.appendToContent(\'# \')" type="button" class="btn btn-default"> <b>H1</b> </button> <button ng-click="vm.appendToContent(\'## \')" type="button" class="btn btn-default"> <b>H2</b> </button> <button ng-click="vm.appendToContent(\'### \')" type="button" class="btn btn-default"> <b>H3</b> </button> <button ng-click="vm.appendToContent(\'****\')" type="button" class="btn btn-default"> <span class="glyphicon glyphicon-bold" aria-hidden="true"></span> </button> <button ng-click="vm.appendToContent(\'**\')" type="button" class="btn btn-default"> <span class="glyphicon glyphicon-italic" aria-hidden="true"></span> </button> <button ng-click="vm.appendToContent(\'+ \')" type="button" class="btn btn-default"> <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> </button> <button ng-click="vm.appendToContent(\'[text](url)\')" type="button" class="btn btn-default"> <span class="glyphicon glyphicon-globe" aria-hidden="true"></span> </button> <div class="btn-group"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Wiki <span class="caret"></span> </button> <ul class="dropdown-menu"> <li ng-repeat="art in vm.allArticles" ng-click="vm.generateWikiLinkFor(art)"> <a href="#">{{art.name}}</a> </li> </ul> </div> </div> <textarea class="form-control" ng-model="vm.article.content" cols="30" rows="10"></textarea> <button style="margin: 1rem" class="btn-sm btn-success" ng-click="vm.saveArticle(vm.article)">Save</button> </div>'),a.put("views/articles.html",'<div class="jumbotron"> <table st-table="vm.articles" class="table table-striped"> <thead> <tr> <th>Id</th> <th>Name</th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="article in vm.articles | orderBy:\'name\' track by article.id"> <td>{{article.id}}</td> <td>{{article.name}}</td> <td> <button class="btn-sm btn-info" ui-sref="articleDetail({articleId: article.id})"> <span class="glyphicon glyphicon-edit" aria-hidden="true"></span> </button> </td> <td> <button class="btn-sm btn-danger" ng-click="vm.deleteArticle(article)"> <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> </button> </td> </tr> </tbody> </table> </div> <button style="margin-bottom: 1rem" class="btn-sm btn-info" ui-sref="newArticle"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Article </button>')}]);